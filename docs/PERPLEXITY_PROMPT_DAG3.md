# üîç Perplexity Pro Prompt - Dag 3: Offline-st√∂d & Sync Research

## üìã Kopiera denna prompt till Perplexity Pro:

```
Du √§r research-assistent f√∂r Frost Solutions, ett byggf√∂retags mjukvaruprojekt.

L√ÑGET JUST NU (Slutet av Dag 2):
- ‚úÖ Arbetsorder-systemet √§r FULLT IMPLEMENTERAT och fungerar perfekt
- ‚úÖ Next.js 16 App Router med Supabase backend
- ‚úÖ React Query f√∂r data fetching
- ‚úÖ TypeScript och Tailwind CSS

DAG 3 M√ÖL: Offline-st√∂d & Sync Research
- Research Service Worker best practices
- Research IndexedDB patterns f√∂r React
- Research sync strategies f√∂r offline-first apps
- Research konfliktl√∂sning patterns
- Research PWA offline patterns

RESEARCH-UPPGIFTER F√ñR DAG 3:

1. SERVICE WORKER BEST PRACTICES:
   - Hur s√§tter man upp Service Worker i Next.js 16 App Router?
   - next-pwa vs manuell Service Worker setup (f√∂rdelar/nackdelar)
   - Cache strategies (Network First, Cache First, Stale While Revalidate)
   - Background Sync API f√∂r offline-√§ndringar
   - Service Worker lifecycle och updates
   - Error handling i Service Workers
   - Debugging Service Workers

2. INDEXEDDB PATTERNS F√ñR REACT:
   - Best practices f√∂r IndexedDB i React-appar
   - Bibliotek: idb, Dexie.js, localForage (j√§mf√∂r)
   - Schema design f√∂r offline storage
   - CRUD operations patterns
   - React hooks f√∂r IndexedDB
   - Error handling och retry logic
   - Performance optimization

3. SYNC STRATEGIES:
   - Offline-first vs online-first approaches
   - Timestamp-baserad sync (last_updated_at)
   - Conflict resolution strategies (last-write-wins, manual merge, CRDT)
   - Optimistic updates med rollback
   - Batch sync f√∂r effektivitet
   - Incremental sync (bara √§ndrade records)
   - Background sync API integration

4. PWA OFFLINE PATTERNS:
   - Best practices f√∂r PWA offline-st√∂d
   - Offline detection och notification
   - Sync queue management
   - Visual feedback patterns (online/offline/synkar)
   - Error handling f√∂r sync failures
   - Retry strategies (exponential backoff)

5. REACT QUERY + OFFLINE:
   - Hur konfigurerar man React Query f√∂r offline-first?
   - cacheTime och staleTime f√∂r offline
   - Persist cache med IndexedDB
   - Optimistic updates i React Query
   - Error handling och retry
   - Background sync integration

6. KONFLIKTL√ñSNING:
   - Conflict detection algorithms
   - Last-write-wins strategy
   - Manual merge patterns
   - CRDT (Conflict-free Replicated Data Types)
   - User notification f√∂r konflikter
   - UI patterns f√∂r conflict resolution

LEVERABLER:
F√∂r varje research-uppgift, ge:
1. Summary av findings
2. Recommended approach f√∂r v√•rt projekt
3. Code examples (om relevant)
4. Links till documentation
5. Common pitfalls att undvika
6. Performance considerations

FOKUS:
- Praktiska l√∂sningar som fungerar med Next.js 16
- Patterns som matchar v√•r existing kodbase
- Best practices fr√•n production apps
- Performance och user experience

Fr√•ga mig om n√•got √§r oklart eller om du beh√∂ver mer context!
```

---

## üéØ Research-fokus

### 1. Service Worker
- Next.js 16 integration
- Cache strategies
- Background Sync API

### 2. IndexedDB
- React patterns
- Bibliotek-j√§mf√∂relse
- Performance

### 3. Sync Strategies
- Offline-first approaches
- Conflict resolution
- Optimization

### 4. PWA Patterns
- Best practices
- User experience
- Error handling

### 5. React Query Integration
- Offline-first config
- Cache persistence
- Optimistic updates

### 6. Conflict Resolution
- Algorithms
- Strategies
- UI patterns

---

**Status:** ‚úÖ Redo f√∂r research
**Fokus:** Praktiska l√∂sningar och best practices

