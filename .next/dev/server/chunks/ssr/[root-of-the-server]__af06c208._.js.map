{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/vilmerfrost/frost-demo/app/tid/ny/page.tsx"],"sourcesContent":["import { createClient } from '../../utils/supabase/server'\nimport { createTimeEntry } from './actions'\n\nexport default async function NewTimeEntryPage({\n  searchParams,\n}: {\n  searchParams?: { project?: string; err?: string }\n}) {\n  const supabase = createClient()\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n\n  if (!user) {\n    return (\n      <div className=\"mx-auto max-w-xl card p-8\">\n        <h1 className=\"text-xl font-semibold\">Rapportera tid</h1>\n        <p className=\"mt-2\">Du är inte inloggad. <a className=\"underline\" href=\"/login\">Logga in</a></p>\n      </div>\n    )\n  }\n\n  // Hämta projekt att välja på\n  const { data: projects } = await supabase\n    .from('projects')\n    .select('id, name')\n    .order('created_at', { ascending: false })\n\n  const today = new Date()\n    .toISOString()\n    .slice(0, 10) // YYYY-MM-DD\n\n  const preselectedProject = searchParams?.project || ''\n\n  return (\n    <div className=\"mx-auto max-w-2xl space-y-6\">\n      {searchParams?.err && (\n        <div className=\"rounded-xl border border-red-300 bg-red-50 text-red-700 p-4\">\n          <p className=\"font-medium\">Fel</p>\n          <p className=\"text-sm mt-1 break-words\">{decodeURIComponent(searchParams.err)}</p>\n        </div>\n      )}\n\n      <div className=\"card p-6\">\n        <div className=\"flex items-center justify-between\">\n          <h1 className=\"text-xl font-semibold\">Rapportera tid</h1>\n          <a href=\"/projects\" className=\"text-sm underline\">Tillbaka till projekt</a>\n        </div>\n\n        <form action={createTimeEntry} className=\"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4\">\n          {/* Projekt */}\n          <div className=\"sm:col-span-2\">\n            <label className=\"label\">Projekt</label>\n            <select\n              name=\"project_id\"\n              className=\"input\"\n              defaultValue={preselectedProject || ''}\n              required\n              {...(preselectedProject ? { disabled: false } : {})}\n            >\n              <option value=\"\" disabled>\n                Välj projekt…\n              </option>\n              {(projects ?? []).map((p) => (\n                <option key={p.id} value={p.id}>\n                  {p.name}\n                </option>\n              ))}\n            </select>\n            {/* Om du vill låsa projektvalet när query-param finns, byt disabled: true i selecten ovan */}\n          </div>\n\n          {/* Datum */}\n          <div>\n            <label className=\"label\">Datum</label>\n            <input name=\"date\" type=\"date\" className=\"input\" defaultValue={today} required />\n          </div>\n\n          {/* Typ av arbete */}\n          <div>\n            <label className=\"label\">Typ av arbete (valfritt)</label>\n            <input name=\"work_type\" type=\"text\" className=\"input\" placeholder=\"Snickeri, Rivning...\" />\n          </div>\n\n          {/* Start / Slut */}\n          <div>\n            <label className=\"label\">Start</label>\n            <input name=\"start_time\" type=\"time\" className=\"input\" defaultValue=\"07:00\" required />\n          </div>\n          <div>\n            <label className=\"label\">Slut</label>\n            <input name=\"end_time\" type=\"time\" className=\"input\" defaultValue=\"16:00\" required />\n          </div>\n\n          {/* Rast */}\n          <div className=\"sm:col-span-2\">\n            <label className=\"label\">Rast (minuter)</label>\n            <input name=\"break_minutes\" type=\"number\" min={0} step={5} className=\"input\" defaultValue={30} />\n          </div>\n\n          <div className=\"sm:col-span-2 flex items-center gap-3 pt-2\">\n            <button type=\"submit\" className=\"btn-primary px-5 py-2\">Spara tid</button>\n            <a href=\"/projects\" className=\"btn-secondary px-5 py-2\">Avbryt</a>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n\n\n\n"],"names":[],"mappings":"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","debugId":null}}]
}