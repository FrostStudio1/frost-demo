{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/vilmerfrost/frost-demo/app/projects/page.tsx"],"sourcesContent":["import { createClient } from '../utils/supabase/server'\nimport { createProject } from './actions'\n\nfunction Notice({\n  type = 'info',\n  children,\n}: {\n  type?: 'info' | 'success' | 'error'\n  children: React.ReactNode\n}) {\n  const styles =\n    type === 'success'\n      ? 'border-green-300 bg-green-50 text-green-700'\n      : type === 'error'\n      ? 'border-red-300 bg-red-50 text-red-700'\n      : 'border-blue-300 bg-blue-50 text-blue-700'\n  return <div className={`rounded-xl border p-3 ${styles}`}>{children}</div>\n}\n\nexport default async function ProjectsPage({\n  searchParams,\n}: {\n  searchParams?: { created?: string; err?: string }\n}) {\n  const supabase = createClient()\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n\n  if (!user) {\n    return (\n      <div className=\"mx-auto max-w-xl p-8\">\n        <h1 className=\"text-xl font-semibold\">Projekt</h1>\n        <p className=\"mt-2\">\n          Du är inte inloggad. <a className=\"underline\" href=\"/login\">Logga in</a>\n        </p>\n      </div>\n    )\n  }\n\n  const { data: projects, error } = await supabase\n    .from('projects')\n    .select('id, name, customer_name, created_at, base_rate_sek, budgeted_hours')\n    .order('created_at', { ascending: false })\n\n  return (\n    <div className=\"mx-auto max-w-4xl p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl sm:text-3xl font-bold\">Projekt</h1>\n        <a href=\"/\" className=\"text-sm underline\">Hem</a>\n      </div>\n\n      {searchParams?.created === '1' && (\n        <Notice type=\"success\">Projekt skapat! ✅</Notice>\n      )}\n      {searchParams?.err && (\n        <Notice type=\"error\">{decodeURIComponent(searchParams.err)}</Notice>\n      )}\n\n      {/* Lista projekt */}\n      <div className=\"space-y-3\">\n        {(projects ?? []).length === 0 ? (\n          <Notice>Inga projekt ännu – skapa ditt första här nedanför.</Notice>\n        ) : (\n          (projects ?? []).map((p) => (\n            <div key={p.id} className=\"rounded-xl border bg-white p-4 sm:p-5\">\n              <div className=\"flex items-start justify-between gap-4\">\n                <div>\n                  <div className=\"text-lg font-semibold\">{p.name}</div>\n                  <div className=\"text-sm text-gray-600\">\n                    {p.customer_name || 'Kund saknas'}\n                  </div>\n                  <div className=\"mt-1 text-xs text-gray-500\">\n                    Baspris: {Number(p.base_rate_sek ?? 0).toLocaleString('sv-SE')} kr/h\n                    {Number(p.budgeted_hours ?? 0) > 0 && (\n                      <> • Budget: {p.budgeted_hours} tim</>\n                    )}\n                  </div>\n                </div>\n                <div className=\"flex flex-col items-end gap-2\">\n                  <a\n                    className=\"text-sm underline\"\n                    href={`/tid/ny?project=${p.id}`}\n                  >\n                    Rapportera tid\n                  </a>\n                  <a\n                className=\"text-sm underline text-blue-600 hover:text-blue-800\"\n                href={`/projects/${p.id}/invoice`}\n                >\n               Visa faktura\n                </a>\n\n\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* Skapa nytt projekt */}\n      <div className=\"rounded-xl border bg-white p-6 sm:p-8\">\n        <h2 className=\"text-xl font-semibold\">Skapa nytt projekt</h2>\n        <form action={createProject} className=\"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4\">\n          {/* Projektnamn */}\n          <div className=\"sm:col-span-2\">\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Projektnamn</label>\n            <input\n              name=\"name\"\n              type=\"text\"\n              className=\"input w-full\"\n              placeholder=\"Altanbygge, Köksrenovering…\"\n              required\n            />\n          </div>\n\n          {/* Kundinformation */}\n          <div className=\"sm:col-span-2 mt-2\">\n            <h3 className=\"text-lg font-semibold text-gray-800\">Kundinformation</h3>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Kundnamn</label>\n            <input\n              name=\"customer_name\"\n              type=\"text\"\n              className=\"input w-full\"\n              placeholder=\"Kundens företag eller namn\"\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Kundens e-post</label>\n            <input\n              name=\"customer_email\"\n              type=\"email\"\n              className=\"input w-full\"\n              placeholder=\"kund@exempel.se\"\n            />\n          </div>\n\n          <div className=\"sm:col-span-2\">\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Kundens adress</label>\n            <input\n              name=\"customer_address\"\n              type=\"text\"\n              className=\"input w-full\"\n              placeholder=\"Exempelgatan 12, 123 45 Stockholm\"\n            />\n          </div>\n\n          <div className=\"sm:col-span-2\">\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Kundens org.nr (valfritt)</label>\n            <input\n              name=\"customer_orgnr\"\n              type=\"text\"\n              className=\"input w-full\"\n              placeholder=\"556677-8899\"\n            />\n          </div>\n\n          {/* Ekonomi */}\n          <div className=\"sm:col-span-2 mt-2\">\n            <h3 className=\"text-lg font-semibold text-gray-800\">Ekonomi</h3>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Baspris / tim (SEK)</label>\n            <input\n              name=\"base_rate_sek\"\n              type=\"number\"\n              min={0}\n              step=\"1\"\n              className=\"input w-full\"\n              defaultValue={360}\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Budget (timmar)</label>\n            <input\n              name=\"budgeted_hours\"\n              type=\"number\"\n              min={0}\n              step=\"1\"\n              className=\"input w-full\"\n              placeholder=\"100\"\n            />\n          </div>\n\n          <div className=\"sm:col-span-2 flex items-center gap-3 pt-2\">\n            <button type=\"submit\" className=\"btn-primary px-5 py-2\">Skapa projekt</button>\n            <a href=\"/\" className=\"btn-secondary px-5 py-2\">Avbryt</a>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}