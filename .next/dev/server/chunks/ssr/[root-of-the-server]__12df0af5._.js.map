{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/vilmerfrost/frost-demo/app/projects/%5Bid%5D/invoice/InvoiceDownload.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/projects/[id]/invoice/InvoiceDownload.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/projects/[id]/invoice/InvoiceDownload.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAiT,GAC9U,+EACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/vilmerfrost/frost-demo/app/projects/%5Bid%5D/invoice/InvoiceDownload.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/projects/[id]/invoice/InvoiceDownload.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/projects/[id]/invoice/InvoiceDownload.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA6R,GAC1T,2DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///Users/vilmerfrost/frost-demo/app/projects/%5Bid%5D/invoice/page.tsx"],"sourcesContent":["import { createClient } from '@/utils/supabase/server'\nimport InvoiceDownload from '@/projects/[id]/invoice/InvoiceDownload' // återanvänd knappen\n\nfunction sek(n: number) {\n  try { return Number(n ?? 0).toLocaleString('sv-SE',{style:'currency',currency:'SEK'}) } catch { return `${Math.round(Number(n??0))} kr` }\n}\nfunction fmtDate(d: string | Date) {\n  const dt = typeof d === 'string' ? new Date(d) : d\n  return dt.toLocaleDateString('sv-SE',{year:'numeric',month:'2-digit',day:'2-digit'})\n}\n\nexport default async function LockedInvoicePage({ params }: { params: { id: string } }) {\n  const supabase = createClient()\n\n  const { data: { user } } = await supabase.auth.getUser()\n  if (!user) {\n    return <div className=\"mx-auto max-w-xl p-8\">Du är inte inloggad. <a className=\"underline\" href=\"/login\">Logga in</a></div>\n  }\n\n  const { data: invoice, error: invErr } = await supabase\n    .from('invoices')\n    .select('*')\n    .eq('id', params.id)\n    .single()\n\n  if (invErr || !invoice) {\n    return <div className=\"mx-auto max-w-xl p-8\">Kunde inte hämta faktura.</div>\n  }\n\n  const { data: lines, error: lineErr } = await supabase\n    .from('invoice_lines')\n    .select('description, quantity, unit, rate_sek, amount_sek')\n    .eq('invoice_id', invoice.id)\n    .order('sort_order', { ascending: true })\n\n  if (lineErr) {\n    return <div className=\"mx-auto max-w-xl p-8\">Kunde inte hämta fakturarader.</div>\n  }\n\n  const rows = lines ?? []\n  const totalHours = rows.reduce((s, r:any) => s + Number(r.quantity ?? 0), 0)\n  const subtotal = Number(invoice.subtotal_sek ?? 0)\n  const rot = Number(invoice.rot_amount_sek ?? 0)\n  const total = Number(invoice.total_due_sek ?? 0)\n\n  return (\n    <div className=\"mx-auto max-w-4xl p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl sm:text-3xl font-bold\">Faktura {invoice.number}</h1>\n        <div className=\"flex gap-2\">\n          <a href=\"/projects\" className=\"btn-secondary px-4 py-2\">Projekt</a>\n          <InvoiceDownload targetId=\"pdf-invoice\" fileName={`faktura-${invoice.number}.pdf`} />\n        </div>\n      </div>\n\n      <div id=\"pdf-invoice\" className=\"bg-white shadow-sm ring-1 ring-gray-200 rounded-xl overflow-hidden\">\n        {/* Header */}\n        <div className=\"p-6 sm:p-8 border-b flex items-start justify-between gap-6\">\n          <div>\n            <div className=\"text-3xl font-extrabold text-blue-700\">Frost Bygg</div>\n            <div className=\"text-gray-500 mt-1 text-sm\">\n              Org.nr: 556677-8899<br/>Gatuadress 1, 123 45 Stad<br/>info@frostbygg.se\n            </div>\n          </div>\n          <div className=\"text-right\">\n            <div className=\"text-3xl font-bold\">FAKTURA</div>\n            <div className=\"text-sm text-gray-600 mt-1\">\n              Fakturanr: <span className=\"font-medium text-gray-900\">{invoice.number}</span><br/>\n              Datum: <span className=\"font-medium text-gray-900\">{fmtDate(invoice.issue_date)}</span><br/>\n              Förfallodatum: <span className=\"font-medium text-gray-900\">{fmtDate(invoice.due_date)}</span><br/>\n              Status: <span className=\"font-medium uppercase\">{invoice.status}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Kund */}\n        <div className=\"p-6 sm:p-8 border-b grid grid-cols-1 sm:grid-cols-2 gap-8\">\n          <div>\n            <div className=\"text-xs font-semibold text-gray-500 uppercase tracking-wide\">Faktura till</div>\n            <div className=\"text-lg font-medium mt-1\">{invoice.customer_name || 'Ej angiven kund'}</div>\n            {invoice.customer_orgnr && <div className=\"text-sm text-gray-600\">Org.nr: {invoice.customer_orgnr}</div>}\n            {invoice.customer_email && <div className=\"text-sm text-gray-600\">{invoice.customer_email}</div>}\n            {invoice.customer_address && <div className=\"text-sm text-gray-600\">{invoice.customer_address}</div>}\n          </div>\n          <div className=\"sm:text-right\">\n            <div className=\"text-xs font-semibold text-gray-500 uppercase tracking-wide\">Betalning</div>\n            <div className=\"text-sm text-gray-700 mt-1\">Betalningsvillkor: 30 dagar netto</div>\n            <div className=\"text-sm text-gray-700\">Bankgiro: 123-4567</div>\n          </div>\n        </div>\n\n        {/* Rader */}\n        <div className=\"p-6 sm:p-8\">\n          <table className=\"w-full text-sm\">\n            <thead>\n              <tr className=\"bg-gray-50 text-gray-700\">\n                <th className=\"text-left font-semibold p-3 rounded-l-lg\">Beskrivning</th>\n                <th className=\"text-right font-semibold p-3\">Antal</th>\n                <th className=\"text-right font-semibold p-3\">Enhet</th>\n                <th className=\"text-right font-semibold p-3\">Á-pris</th>\n                <th className=\"text-right font-semibold p-3 rounded-r-lg\">Summa</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y\">\n              {rows.length === 0 && (\n                <tr><td className=\"p-3 text-gray-500 italic\" colSpan={5}>Inga rader.</td></tr>\n              )}\n              {rows.map((r:any, i:number) => (\n                <tr key={i} className=\"hover:bg-gray-50\">\n                  <td className=\"p-3\">{r.description}</td>\n                  <td className=\"p-3 text-right\">{Number(r.quantity).toFixed(2)}</td>\n                  <td className=\"p-3 text-right\">{r.unit}</td>\n                  <td className=\"p-3 text-right\">{sek(r.rate_sek)}</td>\n                  <td className=\"p-3 text-right font-medium\">{sek(r.amount_sek)}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n\n          {/* Summering */}\n          <div className=\"mt-8 grid grid-cols-1 sm:grid-cols-2 gap-8\">\n            <div className=\"text-sm text-gray-600\">Totalt antal timmar: <span className=\"font-medium\">{totalHours.toFixed(2)} tim</span></div>\n            <div className=\"space-y-2 text-sm\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-600\">Summa arbetskostnad</span>\n                <span className=\"font-semibold\">{sek(subtotal)}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-600\">Preliminärt ROT-avdrag (30%)</span>\n                <span className=\"font-semibold text-green-700\">−{sek(rot)}</span>\n              </div>\n              <div className=\"pt-3 border-t flex justify-between text-base\">\n                <span className=\"font-bold\">ATT BETALA</span>\n                <span className=\"font-extrabold\">{sek(total)}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"px-6 sm:px-8 py-6 border-t text-center text-xs text-gray-500\">\n          Frost Bygg | Godkänd för F-skatt | Momsreg.nr: SE556677889901\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA,0QAAsE,qBAAqB;;;;AAE3F,SAAS,IAAI,CAAS;IACpB,IAAI;QAAE,OAAO,OAAO,KAAK,GAAG,cAAc,CAAC,SAAQ;YAAC,OAAM;YAAW,UAAS;QAAK;IAAG,EAAE,OAAM;QAAE,OAAO,GAAG,KAAK,KAAK,CAAC,OAAO,KAAG,IAAI,GAAG,CAAC;IAAC;AAC1I;AACA,SAAS,QAAQ,CAAgB;IAC/B,MAAM,KAAK,OAAO,MAAM,WAAW,IAAI,KAAK,KAAK;IACjD,OAAO,GAAG,kBAAkB,CAAC,SAAQ;QAAC,MAAK;QAAU,OAAM;QAAU,KAAI;IAAS;AACpF;AAEe,eAAe,kBAAkB,EAAE,MAAM,EAA8B;IACpF,MAAM,WAAW,IAAA,kJAAY;IAE7B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM;QACT,qBAAO,8OAAC;YAAI,WAAU;;gBAAuB;8BAAqB,8OAAC;oBAAE,WAAU;oBAAY,MAAK;8BAAS;;;;;;;;;;;;IAC3G;IAEA,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,MAAM,EAAE,GAAG,MAAM,SAC5C,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,OAAO,EAAE,EAClB,MAAM;IAET,IAAI,UAAU,CAAC,SAAS;QACtB,qBAAO,8OAAC;YAAI,WAAU;sBAAuB;;;;;;IAC/C;IAEA,MAAM,EAAE,MAAM,KAAK,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,SAC3C,IAAI,CAAC,iBACL,MAAM,CAAC,qDACP,EAAE,CAAC,cAAc,QAAQ,EAAE,EAC3B,KAAK,CAAC,cAAc;QAAE,WAAW;IAAK;IAEzC,IAAI,SAAS;QACX,qBAAO,8OAAC;YAAI,WAAU;sBAAuB;;;;;;IAC/C;IAEA,MAAM,OAAO,SAAS,EAAE;IACxB,MAAM,aAAa,KAAK,MAAM,CAAC,CAAC,GAAG,IAAU,IAAI,OAAO,EAAE,QAAQ,IAAI,IAAI;IAC1E,MAAM,WAAW,OAAO,QAAQ,YAAY,IAAI;IAChD,MAAM,MAAM,OAAO,QAAQ,cAAc,IAAI;IAC7C,MAAM,QAAQ,OAAO,QAAQ,aAAa,IAAI;IAE9C,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;;4BAAiC;4BAAS,QAAQ,MAAM;;;;;;;kCACtE,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,MAAK;gCAAY,WAAU;0CAA0B;;;;;;0CACxD,8OAAC,mKAAe;gCAAC,UAAS;gCAAc,UAAU,CAAC,QAAQ,EAAE,QAAQ,MAAM,CAAC,IAAI,CAAC;;;;;;;;;;;;;;;;;;0BAIrF,8OAAC;gBAAI,IAAG;gBAAc,WAAU;;kCAE9B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAI,WAAU;kDAAwC;;;;;;kDACvD,8OAAC;wCAAI,WAAU;;4CAA6B;0DACvB,8OAAC;;;;;4CAAI;0DAAyB,8OAAC;;;;;4CAAI;;;;;;;;;;;;;0CAG1D,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAAqB;;;;;;kDACpC,8OAAC;wCAAI,WAAU;;4CAA6B;0DAC/B,8OAAC;gDAAK,WAAU;0DAA6B,QAAQ,MAAM;;;;;;0DAAQ,8OAAC;;;;;4CAAI;0DAC5E,8OAAC;gDAAK,WAAU;0DAA6B,QAAQ,QAAQ,UAAU;;;;;;0DAAS,8OAAC;;;;;4CAAI;0DAC7E,8OAAC;gDAAK,WAAU;0DAA6B,QAAQ,QAAQ,QAAQ;;;;;;0DAAS,8OAAC;;;;;4CAAI;0DAC1F,8OAAC;gDAAK,WAAU;0DAAyB,QAAQ,MAAM;;;;;;;;;;;;;;;;;;;;;;;;kCAMrE,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAI,WAAU;kDAA8D;;;;;;kDAC7E,8OAAC;wCAAI,WAAU;kDAA4B,QAAQ,aAAa,IAAI;;;;;;oCACnE,QAAQ,cAAc,kBAAI,8OAAC;wCAAI,WAAU;;4CAAwB;4CAAS,QAAQ,cAAc;;;;;;;oCAChG,QAAQ,cAAc,kBAAI,8OAAC;wCAAI,WAAU;kDAAyB,QAAQ,cAAc;;;;;;oCACxF,QAAQ,gBAAgB,kBAAI,8OAAC;wCAAI,WAAU;kDAAyB,QAAQ,gBAAgB;;;;;;;;;;;;0CAE/F,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAA8D;;;;;;kDAC7E,8OAAC;wCAAI,WAAU;kDAA6B;;;;;;kDAC5C,8OAAC;wCAAI,WAAU;kDAAwB;;;;;;;;;;;;;;;;;;kCAK3C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAM,WAAU;;kDACf,8OAAC;kDACC,cAAA,8OAAC;4CAAG,WAAU;;8DACZ,8OAAC;oDAAG,WAAU;8DAA2C;;;;;;8DACzD,8OAAC;oDAAG,WAAU;8DAA+B;;;;;;8DAC7C,8OAAC;oDAAG,WAAU;8DAA+B;;;;;;8DAC7C,8OAAC;oDAAG,WAAU;8DAA+B;;;;;;8DAC7C,8OAAC;oDAAG,WAAU;8DAA4C;;;;;;;;;;;;;;;;;kDAG9D,8OAAC;wCAAM,WAAU;;4CACd,KAAK,MAAM,KAAK,mBACf,8OAAC;0DAAG,cAAA,8OAAC;oDAAG,WAAU;oDAA2B,SAAS;8DAAG;;;;;;;;;;;4CAE1D,KAAK,GAAG,CAAC,CAAC,GAAO,kBAChB,8OAAC;oDAAW,WAAU;;sEACpB,8OAAC;4DAAG,WAAU;sEAAO,EAAE,WAAW;;;;;;sEAClC,8OAAC;4DAAG,WAAU;sEAAkB,OAAO,EAAE,QAAQ,EAAE,OAAO,CAAC;;;;;;sEAC3D,8OAAC;4DAAG,WAAU;sEAAkB,EAAE,IAAI;;;;;;sEACtC,8OAAC;4DAAG,WAAU;sEAAkB,IAAI,EAAE,QAAQ;;;;;;sEAC9C,8OAAC;4DAAG,WAAU;sEAA8B,IAAI,EAAE,UAAU;;;;;;;mDALrD;;;;;;;;;;;;;;;;;0CAYf,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;4CAAwB;0DAAqB,8OAAC;gDAAK,WAAU;;oDAAe,WAAW,OAAO,CAAC;oDAAG;;;;;;;;;;;;;kDACjH,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAAgB;;;;;;kEAChC,8OAAC;wDAAK,WAAU;kEAAiB,IAAI;;;;;;;;;;;;0DAEvC,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAAgB;;;;;;kEAChC,8OAAC;wDAAK,WAAU;;4DAA+B;4DAAE,IAAI;;;;;;;;;;;;;0DAEvD,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAAY;;;;;;kEAC5B,8OAAC;wDAAK,WAAU;kEAAkB,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAO9C,8OAAC;wBAAI,WAAU;kCAA+D;;;;;;;;;;;;;;;;;;AAMtF","debugId":null}}]
}