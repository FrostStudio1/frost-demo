"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/resend";
exports.ids = ["vendor-chunks/resend"];
exports.modules = {

/***/ "(rsc)/./node_modules/resend/dist/index.mjs":
/*!********************************************!*\
  !*** ./node_modules/resend/dist/index.mjs ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Resend: () => (/* binding */ Resend)\n/* harmony export */ });\n/* harmony import */ var svix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! svix */ \"(rsc)/./node_modules/svix/dist/index.js\");\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\n\n// package.json\nvar version = \"6.3.0\";\n\n// src/common/utils/build-pagination-query.ts\nfunction buildPaginationQuery(options) {\n  const searchParams = new URLSearchParams();\n  if (options.limit !== void 0) {\n    searchParams.set(\"limit\", options.limit.toString());\n  }\n  if (\"after\" in options && options.after !== void 0) {\n    searchParams.set(\"after\", options.after);\n  }\n  if (\"before\" in options && options.before !== void 0) {\n    searchParams.set(\"before\", options.before);\n  }\n  return searchParams.toString();\n}\n\n// src/api-keys/api-keys.ts\nvar ApiKeys = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload, options = {}) {\n    const data = await this.resend.post(\n      \"/api-keys\",\n      payload,\n      options\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/api-keys?${queryString}` : \"/api-keys\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async remove(id) {\n    const data = await this.resend.delete(\n      `/api-keys/${id}`\n    );\n    return data;\n  }\n};\n\n// src/audiences/audiences.ts\nvar Audiences = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload, options = {}) {\n    const data = await this.resend.post(\n      \"/audiences\",\n      payload,\n      options\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/audiences?${queryString}` : \"/audiences\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/audiences/${id}`\n    );\n    return data;\n  }\n  async remove(id) {\n    const data = await this.resend.delete(\n      `/audiences/${id}`\n    );\n    return data;\n  }\n};\n\n// src/common/utils/parse-email-to-api-options.ts\nfunction parseAttachments(attachments) {\n  return attachments == null ? void 0 : attachments.map((attachment) => ({\n    content: attachment.content,\n    filename: attachment.filename,\n    path: attachment.path,\n    content_type: attachment.contentType,\n    content_id: attachment.contentId\n  }));\n}\nfunction parseEmailToApiOptions(email) {\n  return {\n    attachments: parseAttachments(email.attachments),\n    bcc: email.bcc,\n    cc: email.cc,\n    from: email.from,\n    headers: email.headers,\n    html: email.html,\n    reply_to: email.replyTo,\n    scheduled_at: email.scheduledAt,\n    subject: email.subject,\n    tags: email.tags,\n    text: email.text,\n    to: email.to\n  };\n}\n\n// src/render.ts\nasync function render(node) {\n  let render2;\n  try {\n    ({ render: render2 } = await __webpack_require__.e(/*! import() */ \"_3d4e\").then(__webpack_require__.t.bind(__webpack_require__, /*! @react-email/render */ \"?3d4e\", 19)));\n  } catch (e) {\n    throw new Error(\n      \"Failed to render React component. Make sure to install `@react-email/render` or `@react-email/components`.\"\n    );\n  }\n  return render2(node);\n}\n\n// src/batch/batch.ts\nvar Batch = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async send(payload, options) {\n    return this.create(payload, options);\n  }\n  async create(payload, options) {\n    var _a;\n    const emails = [];\n    for (const email of payload) {\n      if (email.react) {\n        email.html = await render(email.react);\n        email.react = void 0;\n      }\n      emails.push(parseEmailToApiOptions(email));\n    }\n    const data = await this.resend.post(\n      \"/emails/batch\",\n      emails,\n      __spreadProps(__spreadValues({}, options), {\n        headers: __spreadValues({\n          \"x-batch-validation\": (_a = options == null ? void 0 : options.batchValidation) != null ? _a : \"strict\"\n        }, options == null ? void 0 : options.headers)\n      })\n    );\n    return data;\n  }\n};\n\n// src/broadcasts/broadcasts.ts\nvar Broadcasts = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload, options = {}) {\n    if (payload.react) {\n      payload.html = await render(payload.react);\n    }\n    const data = await this.resend.post(\n      \"/broadcasts\",\n      {\n        name: payload.name,\n        audience_id: payload.audienceId,\n        preview_text: payload.previewText,\n        from: payload.from,\n        html: payload.html,\n        reply_to: payload.replyTo,\n        subject: payload.subject,\n        text: payload.text\n      },\n      options\n    );\n    return data;\n  }\n  async send(id, payload) {\n    const data = await this.resend.post(\n      `/broadcasts/${id}/send`,\n      { scheduled_at: payload == null ? void 0 : payload.scheduledAt }\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/broadcasts?${queryString}` : \"/broadcasts\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/broadcasts/${id}`\n    );\n    return data;\n  }\n  async remove(id) {\n    const data = await this.resend.delete(\n      `/broadcasts/${id}`\n    );\n    return data;\n  }\n  async update(id, payload) {\n    if (payload.react) {\n      payload.html = await render(payload.react);\n    }\n    const data = await this.resend.patch(\n      `/broadcasts/${id}`,\n      {\n        name: payload.name,\n        audience_id: payload.audienceId,\n        from: payload.from,\n        html: payload.html,\n        text: payload.text,\n        subject: payload.subject,\n        reply_to: payload.replyTo,\n        preview_text: payload.previewText\n      }\n    );\n    return data;\n  }\n};\n\n// src/contacts/contacts.ts\nvar Contacts = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload, options = {}) {\n    const data = await this.resend.post(\n      `/audiences/${payload.audienceId}/contacts`,\n      {\n        unsubscribed: payload.unsubscribed,\n        email: payload.email,\n        first_name: payload.firstName,\n        last_name: payload.lastName\n      },\n      options\n    );\n    return data;\n  }\n  async list(options) {\n    const _a = options, { audienceId } = _a, paginationOptions = __objRest(_a, [\"audienceId\"]);\n    const queryString = buildPaginationQuery(paginationOptions);\n    const url = queryString ? `/audiences/${audienceId}/contacts?${queryString}` : `/audiences/${audienceId}/contacts`;\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async get(options) {\n    if (!options.id && !options.email) {\n      return {\n        data: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const data = await this.resend.get(\n      `/audiences/${options.audienceId}/contacts/${(options == null ? void 0 : options.email) ? options == null ? void 0 : options.email : options == null ? void 0 : options.id}`\n    );\n    return data;\n  }\n  async update(options) {\n    if (!options.id && !options.email) {\n      return {\n        data: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const data = await this.resend.patch(\n      `/audiences/${options.audienceId}/contacts/${(options == null ? void 0 : options.email) ? options == null ? void 0 : options.email : options == null ? void 0 : options.id}`,\n      {\n        unsubscribed: options.unsubscribed,\n        first_name: options.firstName,\n        last_name: options.lastName\n      }\n    );\n    return data;\n  }\n  async remove(payload) {\n    if (!payload.id && !payload.email) {\n      return {\n        data: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const data = await this.resend.delete(\n      `/audiences/${payload.audienceId}/contacts/${(payload == null ? void 0 : payload.email) ? payload == null ? void 0 : payload.email : payload == null ? void 0 : payload.id}`\n    );\n    return data;\n  }\n};\n\n// src/common/utils/parse-domain-to-api-options.ts\nfunction parseDomainToApiOptions(domain) {\n  return {\n    name: domain.name,\n    region: domain.region,\n    custom_return_path: domain.customReturnPath\n  };\n}\n\n// src/domains/domains.ts\nvar Domains = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload, options = {}) {\n    const data = await this.resend.post(\n      \"/domains\",\n      parseDomainToApiOptions(payload),\n      options\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/domains?${queryString}` : \"/domains\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/domains/${id}`\n    );\n    return data;\n  }\n  async update(payload) {\n    const data = await this.resend.patch(\n      `/domains/${payload.id}`,\n      {\n        click_tracking: payload.clickTracking,\n        open_tracking: payload.openTracking,\n        tls: payload.tls\n      }\n    );\n    return data;\n  }\n  async remove(id) {\n    const data = await this.resend.delete(\n      `/domains/${id}`\n    );\n    return data;\n  }\n  async verify(id) {\n    const data = await this.resend.post(\n      `/domains/${id}/verify`\n    );\n    return data;\n  }\n};\n\n// src/emails/emails.ts\nvar Emails = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async send(payload, options = {}) {\n    return this.create(payload, options);\n  }\n  async create(payload, options = {}) {\n    if (payload.react) {\n      payload.html = await render(payload.react);\n    }\n    const data = await this.resend.post(\n      \"/emails\",\n      parseEmailToApiOptions(payload),\n      options\n    );\n    return data;\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/emails/${id}`\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/emails?${queryString}` : \"/emails\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async update(payload) {\n    const data = await this.resend.patch(\n      `/emails/${payload.id}`,\n      {\n        scheduled_at: payload.scheduledAt\n      }\n    );\n    return data;\n  }\n  async cancel(id) {\n    const data = await this.resend.post(\n      `/emails/${id}/cancel`\n    );\n    return data;\n  }\n};\n\n// src/webhooks/webhooks.ts\n\nvar Webhooks = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload, options = {}) {\n    const data = await this.resend.post(\n      \"/webhooks\",\n      payload,\n      options\n    );\n    return data;\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/webhooks/${id}`\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/webhooks?${queryString}` : \"/webhooks\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async update(id, payload) {\n    const data = await this.resend.patch(\n      `/webhooks/${id}`,\n      payload\n    );\n    return data;\n  }\n  async remove(id) {\n    const data = await this.resend.delete(\n      `/webhooks/${id}`\n    );\n    return data;\n  }\n  verify(payload) {\n    const webhook = new svix__WEBPACK_IMPORTED_MODULE_0__.Webhook(payload.webhookSecret);\n    return webhook.verify(payload.payload, {\n      \"svix-id\": payload.headers.id,\n      \"svix-timestamp\": payload.headers.timestamp,\n      \"svix-signature\": payload.headers.signature\n    });\n  }\n};\n\n// src/resend.ts\nvar defaultBaseUrl = \"https://api.resend.com\";\nvar defaultUserAgent = `resend-node:${version}`;\nvar baseUrl = typeof process !== \"undefined\" && process.env ? process.env.RESEND_BASE_URL || defaultBaseUrl : defaultBaseUrl;\nvar userAgent = typeof process !== \"undefined\" && process.env ? process.env.RESEND_USER_AGENT || defaultUserAgent : defaultUserAgent;\nvar Resend = class {\n  constructor(key) {\n    this.key = key;\n    this.apiKeys = new ApiKeys(this);\n    this.audiences = new Audiences(this);\n    this.batch = new Batch(this);\n    this.broadcasts = new Broadcasts(this);\n    this.contacts = new Contacts(this);\n    this.domains = new Domains(this);\n    this.emails = new Emails(this);\n    this.webhooks = new Webhooks(this);\n    if (!key) {\n      if (typeof process !== \"undefined\" && process.env) {\n        this.key = process.env.RESEND_API_KEY;\n      }\n      if (!this.key) {\n        throw new Error(\n          'Missing API key. Pass it to the constructor `new Resend(\"re_123\")`'\n        );\n      }\n    }\n    this.headers = new Headers({\n      Authorization: `Bearer ${this.key}`,\n      \"User-Agent\": userAgent,\n      \"Content-Type\": \"application/json\"\n    });\n  }\n  async fetchRequest(path, options = {}) {\n    try {\n      const response = await fetch(`${baseUrl}${path}`, options);\n      if (!response.ok) {\n        try {\n          const rawError = await response.text();\n          return { data: null, error: JSON.parse(rawError) };\n        } catch (err) {\n          if (err instanceof SyntaxError) {\n            return {\n              data: null,\n              error: {\n                name: \"application_error\",\n                statusCode: response.status,\n                message: \"Internal server error. We are unable to process your request right now, please try again later.\"\n              }\n            };\n          }\n          const error = {\n            message: response.statusText,\n            statusCode: response.status,\n            name: \"application_error\"\n          };\n          if (err instanceof Error) {\n            return { data: null, error: __spreadProps(__spreadValues({}, error), { message: err.message }) };\n          }\n          return { data: null, error };\n        }\n      }\n      const data = await response.json();\n      return { data, error: null };\n    } catch (e) {\n      return {\n        data: null,\n        error: {\n          name: \"application_error\",\n          statusCode: null,\n          message: \"Unable to fetch data. The request could not be resolved.\"\n        }\n      };\n    }\n  }\n  async post(path, entity, options = {}) {\n    const headers = new Headers(this.headers);\n    if (options.headers) {\n      for (const [key, value] of new Headers(options.headers).entries()) {\n        headers.set(key, value);\n      }\n    }\n    if (options.idempotencyKey) {\n      headers.set(\"Idempotency-Key\", options.idempotencyKey);\n    }\n    const requestOptions = __spreadProps(__spreadValues({\n      method: \"POST\",\n      body: JSON.stringify(entity)\n    }, options), {\n      headers\n    });\n    return this.fetchRequest(path, requestOptions);\n  }\n  async get(path, options = {}) {\n    const headers = new Headers(this.headers);\n    if (options.headers) {\n      for (const [key, value] of new Headers(options.headers).entries()) {\n        headers.set(key, value);\n      }\n    }\n    const requestOptions = __spreadProps(__spreadValues({\n      method: \"GET\"\n    }, options), {\n      headers\n    });\n    return this.fetchRequest(path, requestOptions);\n  }\n  async put(path, entity, options = {}) {\n    const headers = new Headers(this.headers);\n    if (options.headers) {\n      for (const [key, value] of new Headers(options.headers).entries()) {\n        headers.set(key, value);\n      }\n    }\n    const requestOptions = __spreadProps(__spreadValues({\n      method: \"PUT\",\n      body: JSON.stringify(entity)\n    }, options), {\n      headers\n    });\n    return this.fetchRequest(path, requestOptions);\n  }\n  async patch(path, entity, options = {}) {\n    const headers = new Headers(this.headers);\n    if (options.headers) {\n      for (const [key, value] of new Headers(options.headers).entries()) {\n        headers.set(key, value);\n      }\n    }\n    const requestOptions = __spreadProps(__spreadValues({\n      method: \"PATCH\",\n      body: JSON.stringify(entity)\n    }, options), {\n      headers\n    });\n    return this.fetchRequest(path, requestOptions);\n  }\n  async delete(path, query) {\n    const requestOptions = {\n      method: \"DELETE\",\n      body: JSON.stringify(query),\n      headers: this.headers\n    };\n    return this.fetchRequest(path, requestOptions);\n  }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvcmVzZW5kL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLDJDQUEyQyxZQUFZO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsR0FBRztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsNENBQTRDLFlBQVk7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixHQUFHO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsR0FBRztBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLGtC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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb3N0LWRlbW8vLi9ub2RlX21vZHVsZXMvcmVzZW5kL2Rpc3QvaW5kZXgubWpzPzlhNWIiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZlByb3BzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXM7XG52YXIgX19nZXRPd25Qcm9wRGVzY3MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycztcbnZhciBfX2dldE93blByb3BTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcC5jYWxsKGIsIHByb3ApKVxuICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoYikpIHtcbiAgICAgIGlmIChfX3Byb3BJc0VudW0uY2FsbChiLCBwcm9wKSlcbiAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xudmFyIF9fc3ByZWFkUHJvcHMgPSAoYSwgYikgPT4gX19kZWZQcm9wcyhhLCBfX2dldE93blByb3BEZXNjcyhiKSk7XG52YXIgX19vYmpSZXN0ID0gKHNvdXJjZSwgZXhjbHVkZSkgPT4ge1xuICB2YXIgdGFyZ2V0ID0ge307XG4gIGZvciAodmFyIHByb3AgaW4gc291cmNlKVxuICAgIGlmIChfX2hhc093blByb3AuY2FsbChzb3VyY2UsIHByb3ApICYmIGV4Y2x1ZGUuaW5kZXhPZihwcm9wKSA8IDApXG4gICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gIGlmIChzb3VyY2UgIT0gbnVsbCAmJiBfX2dldE93blByb3BTeW1ib2xzKVxuICAgIGZvciAodmFyIHByb3Agb2YgX19nZXRPd25Qcm9wU3ltYm9scyhzb3VyY2UpKSB7XG4gICAgICBpZiAoZXhjbHVkZS5pbmRleE9mKHByb3ApIDwgMCAmJiBfX3Byb3BJc0VudW0uY2FsbChzb3VyY2UsIHByb3ApKVxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgfVxuICByZXR1cm4gdGFyZ2V0O1xufTtcblxuLy8gcGFja2FnZS5qc29uXG52YXIgdmVyc2lvbiA9IFwiNi4zLjBcIjtcblxuLy8gc3JjL2NvbW1vbi91dGlscy9idWlsZC1wYWdpbmF0aW9uLXF1ZXJ5LnRzXG5mdW5jdGlvbiBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKSB7XG4gIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgaWYgKG9wdGlvbnMubGltaXQgIT09IHZvaWQgMCkge1xuICAgIHNlYXJjaFBhcmFtcy5zZXQoXCJsaW1pdFwiLCBvcHRpb25zLmxpbWl0LnRvU3RyaW5nKCkpO1xuICB9XG4gIGlmIChcImFmdGVyXCIgaW4gb3B0aW9ucyAmJiBvcHRpb25zLmFmdGVyICE9PSB2b2lkIDApIHtcbiAgICBzZWFyY2hQYXJhbXMuc2V0KFwiYWZ0ZXJcIiwgb3B0aW9ucy5hZnRlcik7XG4gIH1cbiAgaWYgKFwiYmVmb3JlXCIgaW4gb3B0aW9ucyAmJiBvcHRpb25zLmJlZm9yZSAhPT0gdm9pZCAwKSB7XG4gICAgc2VhcmNoUGFyYW1zLnNldChcImJlZm9yZVwiLCBvcHRpb25zLmJlZm9yZSk7XG4gIH1cbiAgcmV0dXJuIHNlYXJjaFBhcmFtcy50b1N0cmluZygpO1xufVxuXG4vLyBzcmMvYXBpLWtleXMvYXBpLWtleXMudHNcbnZhciBBcGlLZXlzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXNlbmQpIHtcbiAgICB0aGlzLnJlc2VuZCA9IHJlc2VuZDtcbiAgfVxuICBhc3luYyBjcmVhdGUocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICBcIi9hcGkta2V5c1wiLFxuICAgICAgcGF5bG9hZCxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvYXBpLWtleXM/JHtxdWVyeVN0cmluZ31gIDogXCIvYXBpLWtleXNcIjtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgcmVtb3ZlKGlkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmRlbGV0ZShcbiAgICAgIGAvYXBpLWtleXMvJHtpZH1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufTtcblxuLy8gc3JjL2F1ZGllbmNlcy9hdWRpZW5jZXMudHNcbnZhciBBdWRpZW5jZXMgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuICAgIHRoaXMucmVzZW5kID0gcmVzZW5kO1xuICB9XG4gIGFzeW5jIGNyZWF0ZShwYXlsb2FkLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcbiAgICAgIFwiL2F1ZGllbmNlc1wiLFxuICAgICAgcGF5bG9hZCxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvYXVkaWVuY2VzPyR7cXVlcnlTdHJpbmd9YCA6IFwiL2F1ZGllbmNlc1wiO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBnZXQoaWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KFxuICAgICAgYC9hdWRpZW5jZXMvJHtpZH1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyByZW1vdmUoaWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZGVsZXRlKFxuICAgICAgYC9hdWRpZW5jZXMvJHtpZH1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufTtcblxuLy8gc3JjL2NvbW1vbi91dGlscy9wYXJzZS1lbWFpbC10by1hcGktb3B0aW9ucy50c1xuZnVuY3Rpb24gcGFyc2VBdHRhY2htZW50cyhhdHRhY2htZW50cykge1xuICByZXR1cm4gYXR0YWNobWVudHMgPT0gbnVsbCA/IHZvaWQgMCA6IGF0dGFjaG1lbnRzLm1hcCgoYXR0YWNobWVudCkgPT4gKHtcbiAgICBjb250ZW50OiBhdHRhY2htZW50LmNvbnRlbnQsXG4gICAgZmlsZW5hbWU6IGF0dGFjaG1lbnQuZmlsZW5hbWUsXG4gICAgcGF0aDogYXR0YWNobWVudC5wYXRoLFxuICAgIGNvbnRlbnRfdHlwZTogYXR0YWNobWVudC5jb250ZW50VHlwZSxcbiAgICBjb250ZW50X2lkOiBhdHRhY2htZW50LmNvbnRlbnRJZFxuICB9KSk7XG59XG5mdW5jdGlvbiBwYXJzZUVtYWlsVG9BcGlPcHRpb25zKGVtYWlsKSB7XG4gIHJldHVybiB7XG4gICAgYXR0YWNobWVudHM6IHBhcnNlQXR0YWNobWVudHMoZW1haWwuYXR0YWNobWVudHMpLFxuICAgIGJjYzogZW1haWwuYmNjLFxuICAgIGNjOiBlbWFpbC5jYyxcbiAgICBmcm9tOiBlbWFpbC5mcm9tLFxuICAgIGhlYWRlcnM6IGVtYWlsLmhlYWRlcnMsXG4gICAgaHRtbDogZW1haWwuaHRtbCxcbiAgICByZXBseV90bzogZW1haWwucmVwbHlUbyxcbiAgICBzY2hlZHVsZWRfYXQ6IGVtYWlsLnNjaGVkdWxlZEF0LFxuICAgIHN1YmplY3Q6IGVtYWlsLnN1YmplY3QsXG4gICAgdGFnczogZW1haWwudGFncyxcbiAgICB0ZXh0OiBlbWFpbC50ZXh0LFxuICAgIHRvOiBlbWFpbC50b1xuICB9O1xufVxuXG4vLyBzcmMvcmVuZGVyLnRzXG5hc3luYyBmdW5jdGlvbiByZW5kZXIobm9kZSkge1xuICBsZXQgcmVuZGVyMjtcbiAgdHJ5IHtcbiAgICAoeyByZW5kZXI6IHJlbmRlcjIgfSA9IGF3YWl0IGltcG9ydChcIkByZWFjdC1lbWFpbC9yZW5kZXJcIikpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJGYWlsZWQgdG8gcmVuZGVyIFJlYWN0IGNvbXBvbmVudC4gTWFrZSBzdXJlIHRvIGluc3RhbGwgYEByZWFjdC1lbWFpbC9yZW5kZXJgIG9yIGBAcmVhY3QtZW1haWwvY29tcG9uZW50c2AuXCJcbiAgICApO1xuICB9XG4gIHJldHVybiByZW5kZXIyKG5vZGUpO1xufVxuXG4vLyBzcmMvYmF0Y2gvYmF0Y2gudHNcbnZhciBCYXRjaCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocmVzZW5kKSB7XG4gICAgdGhpcy5yZXNlbmQgPSByZXNlbmQ7XG4gIH1cbiAgYXN5bmMgc2VuZChwYXlsb2FkLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlKHBheWxvYWQsIG9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZShwYXlsb2FkLCBvcHRpb25zKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IGVtYWlscyA9IFtdO1xuICAgIGZvciAoY29uc3QgZW1haWwgb2YgcGF5bG9hZCkge1xuICAgICAgaWYgKGVtYWlsLnJlYWN0KSB7XG4gICAgICAgIGVtYWlsLmh0bWwgPSBhd2FpdCByZW5kZXIoZW1haWwucmVhY3QpO1xuICAgICAgICBlbWFpbC5yZWFjdCA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICAgIGVtYWlscy5wdXNoKHBhcnNlRW1haWxUb0FwaU9wdGlvbnMoZW1haWwpKTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICBcIi9lbWFpbHMvYmF0Y2hcIixcbiAgICAgIGVtYWlscyxcbiAgICAgIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIG9wdGlvbnMpLCB7XG4gICAgICAgIGhlYWRlcnM6IF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgICAgICBcIngtYmF0Y2gtdmFsaWRhdGlvblwiOiAoX2EgPSBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmJhdGNoVmFsaWRhdGlvbikgIT0gbnVsbCA/IF9hIDogXCJzdHJpY3RcIlxuICAgICAgICB9LCBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmhlYWRlcnMpXG4gICAgICB9KVxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbn07XG5cbi8vIHNyYy9icm9hZGNhc3RzL2Jyb2FkY2FzdHMudHNcbnZhciBCcm9hZGNhc3RzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXNlbmQpIHtcbiAgICB0aGlzLnJlc2VuZCA9IHJlc2VuZDtcbiAgfVxuICBhc3luYyBjcmVhdGUocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKHBheWxvYWQucmVhY3QpIHtcbiAgICAgIHBheWxvYWQuaHRtbCA9IGF3YWl0IHJlbmRlcihwYXlsb2FkLnJlYWN0KTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICBcIi9icm9hZGNhc3RzXCIsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IHBheWxvYWQubmFtZSxcbiAgICAgICAgYXVkaWVuY2VfaWQ6IHBheWxvYWQuYXVkaWVuY2VJZCxcbiAgICAgICAgcHJldmlld190ZXh0OiBwYXlsb2FkLnByZXZpZXdUZXh0LFxuICAgICAgICBmcm9tOiBwYXlsb2FkLmZyb20sXG4gICAgICAgIGh0bWw6IHBheWxvYWQuaHRtbCxcbiAgICAgICAgcmVwbHlfdG86IHBheWxvYWQucmVwbHlUbyxcbiAgICAgICAgc3ViamVjdDogcGF5bG9hZC5zdWJqZWN0LFxuICAgICAgICB0ZXh0OiBwYXlsb2FkLnRleHRcbiAgICAgIH0sXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBzZW5kKGlkLCBwYXlsb2FkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICBgL2Jyb2FkY2FzdHMvJHtpZH0vc2VuZGAsXG4gICAgICB7IHNjaGVkdWxlZF9hdDogcGF5bG9hZCA9PSBudWxsID8gdm9pZCAwIDogcGF5bG9hZC5zY2hlZHVsZWRBdCB9XG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBsaXN0KG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG4gICAgY29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL2Jyb2FkY2FzdHM/JHtxdWVyeVN0cmluZ31gIDogXCIvYnJvYWRjYXN0c1wiO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBnZXQoaWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KFxuICAgICAgYC9icm9hZGNhc3RzLyR7aWR9YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgcmVtb3ZlKGlkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmRlbGV0ZShcbiAgICAgIGAvYnJvYWRjYXN0cy8ke2lkfWBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIHVwZGF0ZShpZCwgcGF5bG9hZCkge1xuICAgIGlmIChwYXlsb2FkLnJlYWN0KSB7XG4gICAgICBwYXlsb2FkLmh0bWwgPSBhd2FpdCByZW5kZXIocGF5bG9hZC5yZWFjdCk7XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wYXRjaChcbiAgICAgIGAvYnJvYWRjYXN0cy8ke2lkfWAsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IHBheWxvYWQubmFtZSxcbiAgICAgICAgYXVkaWVuY2VfaWQ6IHBheWxvYWQuYXVkaWVuY2VJZCxcbiAgICAgICAgZnJvbTogcGF5bG9hZC5mcm9tLFxuICAgICAgICBodG1sOiBwYXlsb2FkLmh0bWwsXG4gICAgICAgIHRleHQ6IHBheWxvYWQudGV4dCxcbiAgICAgICAgc3ViamVjdDogcGF5bG9hZC5zdWJqZWN0LFxuICAgICAgICByZXBseV90bzogcGF5bG9hZC5yZXBseVRvLFxuICAgICAgICBwcmV2aWV3X3RleHQ6IHBheWxvYWQucHJldmlld1RleHRcbiAgICAgIH1cbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG59O1xuXG4vLyBzcmMvY29udGFjdHMvY29udGFjdHMudHNcbnZhciBDb250YWN0cyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocmVzZW5kKSB7XG4gICAgdGhpcy5yZXNlbmQgPSByZXNlbmQ7XG4gIH1cbiAgYXN5bmMgY3JlYXRlKHBheWxvYWQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFxuICAgICAgYC9hdWRpZW5jZXMvJHtwYXlsb2FkLmF1ZGllbmNlSWR9L2NvbnRhY3RzYCxcbiAgICAgIHtcbiAgICAgICAgdW5zdWJzY3JpYmVkOiBwYXlsb2FkLnVuc3Vic2NyaWJlZCxcbiAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsXG4gICAgICAgIGZpcnN0X25hbWU6IHBheWxvYWQuZmlyc3ROYW1lLFxuICAgICAgICBsYXN0X25hbWU6IHBheWxvYWQubGFzdE5hbWVcbiAgICAgIH0sXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBsaXN0KG9wdGlvbnMpIHtcbiAgICBjb25zdCBfYSA9IG9wdGlvbnMsIHsgYXVkaWVuY2VJZCB9ID0gX2EsIHBhZ2luYXRpb25PcHRpb25zID0gX19vYmpSZXN0KF9hLCBbXCJhdWRpZW5jZUlkXCJdKTtcbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KHBhZ2luYXRpb25PcHRpb25zKTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvYXVkaWVuY2VzLyR7YXVkaWVuY2VJZH0vY29udGFjdHM/JHtxdWVyeVN0cmluZ31gIDogYC9hdWRpZW5jZXMvJHthdWRpZW5jZUlkfS9jb250YWN0c2A7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGdldChvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zLmlkICYmICFvcHRpb25zLmVtYWlsKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIG9yIGBlbWFpbGAgZmllbGQuXCIsXG4gICAgICAgICAgc3RhdHVzQ29kZTogbnVsbCxcbiAgICAgICAgICBuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KFxuICAgICAgYC9hdWRpZW5jZXMvJHtvcHRpb25zLmF1ZGllbmNlSWR9L2NvbnRhY3RzLyR7KG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuZW1haWwpID8gb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5lbWFpbCA6IG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuaWR9YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgdXBkYXRlKG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMuaWQgJiYgIW9wdGlvbnMuZW1haWwpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgb3IgYGVtYWlsYCBmaWVsZC5cIixcbiAgICAgICAgICBzdGF0dXNDb2RlOiBudWxsLFxuICAgICAgICAgIG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wYXRjaChcbiAgICAgIGAvYXVkaWVuY2VzLyR7b3B0aW9ucy5hdWRpZW5jZUlkfS9jb250YWN0cy8keyhvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmVtYWlsKSA/IG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuZW1haWwgOiBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmlkfWAsXG4gICAgICB7XG4gICAgICAgIHVuc3Vic2NyaWJlZDogb3B0aW9ucy51bnN1YnNjcmliZWQsXG4gICAgICAgIGZpcnN0X25hbWU6IG9wdGlvbnMuZmlyc3ROYW1lLFxuICAgICAgICBsYXN0X25hbWU6IG9wdGlvbnMubGFzdE5hbWVcbiAgICAgIH1cbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIHJlbW92ZShwYXlsb2FkKSB7XG4gICAgaWYgKCFwYXlsb2FkLmlkICYmICFwYXlsb2FkLmVtYWlsKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIG9yIGBlbWFpbGAgZmllbGQuXCIsXG4gICAgICAgICAgc3RhdHVzQ29kZTogbnVsbCxcbiAgICAgICAgICBuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZGVsZXRlKFxuICAgICAgYC9hdWRpZW5jZXMvJHtwYXlsb2FkLmF1ZGllbmNlSWR9L2NvbnRhY3RzLyR7KHBheWxvYWQgPT0gbnVsbCA/IHZvaWQgMCA6IHBheWxvYWQuZW1haWwpID8gcGF5bG9hZCA9PSBudWxsID8gdm9pZCAwIDogcGF5bG9hZC5lbWFpbCA6IHBheWxvYWQgPT0gbnVsbCA/IHZvaWQgMCA6IHBheWxvYWQuaWR9YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbn07XG5cbi8vIHNyYy9jb21tb24vdXRpbHMvcGFyc2UtZG9tYWluLXRvLWFwaS1vcHRpb25zLnRzXG5mdW5jdGlvbiBwYXJzZURvbWFpblRvQXBpT3B0aW9ucyhkb21haW4pIHtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBkb21haW4ubmFtZSxcbiAgICByZWdpb246IGRvbWFpbi5yZWdpb24sXG4gICAgY3VzdG9tX3JldHVybl9wYXRoOiBkb21haW4uY3VzdG9tUmV0dXJuUGF0aFxuICB9O1xufVxuXG4vLyBzcmMvZG9tYWlucy9kb21haW5zLnRzXG52YXIgRG9tYWlucyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocmVzZW5kKSB7XG4gICAgdGhpcy5yZXNlbmQgPSByZXNlbmQ7XG4gIH1cbiAgYXN5bmMgY3JlYXRlKHBheWxvYWQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFxuICAgICAgXCIvZG9tYWluc1wiLFxuICAgICAgcGFyc2VEb21haW5Ub0FwaU9wdGlvbnMocGF5bG9hZCksXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBsaXN0KG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG4gICAgY29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL2RvbWFpbnM/JHtxdWVyeVN0cmluZ31gIDogXCIvZG9tYWluc1wiO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBnZXQoaWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KFxuICAgICAgYC9kb21haW5zLyR7aWR9YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgdXBkYXRlKHBheWxvYWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucGF0Y2goXG4gICAgICBgL2RvbWFpbnMvJHtwYXlsb2FkLmlkfWAsXG4gICAgICB7XG4gICAgICAgIGNsaWNrX3RyYWNraW5nOiBwYXlsb2FkLmNsaWNrVHJhY2tpbmcsXG4gICAgICAgIG9wZW5fdHJhY2tpbmc6IHBheWxvYWQub3BlblRyYWNraW5nLFxuICAgICAgICB0bHM6IHBheWxvYWQudGxzXG4gICAgICB9XG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyByZW1vdmUoaWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZGVsZXRlKFxuICAgICAgYC9kb21haW5zLyR7aWR9YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgdmVyaWZ5KGlkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICBgL2RvbWFpbnMvJHtpZH0vdmVyaWZ5YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbn07XG5cbi8vIHNyYy9lbWFpbHMvZW1haWxzLnRzXG52YXIgRW1haWxzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXNlbmQpIHtcbiAgICB0aGlzLnJlc2VuZCA9IHJlc2VuZDtcbiAgfVxuICBhc3luYyBzZW5kKHBheWxvYWQsIG9wdGlvbnMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZShwYXlsb2FkLCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyBjcmVhdGUocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKHBheWxvYWQucmVhY3QpIHtcbiAgICAgIHBheWxvYWQuaHRtbCA9IGF3YWl0IHJlbmRlcihwYXlsb2FkLnJlYWN0KTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICBcIi9lbWFpbHNcIixcbiAgICAgIHBhcnNlRW1haWxUb0FwaU9wdGlvbnMocGF5bG9hZCksXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBnZXQoaWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KFxuICAgICAgYC9lbWFpbHMvJHtpZH1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBsaXN0KG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG4gICAgY29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL2VtYWlscz8ke3F1ZXJ5U3RyaW5nfWAgOiBcIi9lbWFpbHNcIjtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgdXBkYXRlKHBheWxvYWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucGF0Y2goXG4gICAgICBgL2VtYWlscy8ke3BheWxvYWQuaWR9YCxcbiAgICAgIHtcbiAgICAgICAgc2NoZWR1bGVkX2F0OiBwYXlsb2FkLnNjaGVkdWxlZEF0XG4gICAgICB9XG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBjYW5jZWwoaWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcbiAgICAgIGAvZW1haWxzLyR7aWR9L2NhbmNlbGBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG59O1xuXG4vLyBzcmMvd2ViaG9va3Mvd2ViaG9va3MudHNcbmltcG9ydCB7IFdlYmhvb2sgfSBmcm9tIFwic3ZpeFwiO1xudmFyIFdlYmhvb2tzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXNlbmQpIHtcbiAgICB0aGlzLnJlc2VuZCA9IHJlc2VuZDtcbiAgfVxuICBhc3luYyBjcmVhdGUocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICBcIi93ZWJob29rc1wiLFxuICAgICAgcGF5bG9hZCxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGdldChpZCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoXG4gICAgICBgL3dlYmhvb2tzLyR7aWR9YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgbGlzdChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuICAgIGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC93ZWJob29rcz8ke3F1ZXJ5U3RyaW5nfWAgOiBcIi93ZWJob29rc1wiO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyB1cGRhdGUoaWQsIHBheWxvYWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucGF0Y2goXG4gICAgICBgL3dlYmhvb2tzLyR7aWR9YCxcbiAgICAgIHBheWxvYWRcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIHJlbW92ZShpZCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5kZWxldGUoXG4gICAgICBgL3dlYmhvb2tzLyR7aWR9YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgdmVyaWZ5KHBheWxvYWQpIHtcbiAgICBjb25zdCB3ZWJob29rID0gbmV3IFdlYmhvb2socGF5bG9hZC53ZWJob29rU2VjcmV0KTtcbiAgICByZXR1cm4gd2ViaG9vay52ZXJpZnkocGF5bG9hZC5wYXlsb2FkLCB7XG4gICAgICBcInN2aXgtaWRcIjogcGF5bG9hZC5oZWFkZXJzLmlkLFxuICAgICAgXCJzdml4LXRpbWVzdGFtcFwiOiBwYXlsb2FkLmhlYWRlcnMudGltZXN0YW1wLFxuICAgICAgXCJzdml4LXNpZ25hdHVyZVwiOiBwYXlsb2FkLmhlYWRlcnMuc2lnbmF0dXJlXG4gICAgfSk7XG4gIH1cbn07XG5cbi8vIHNyYy9yZXNlbmQudHNcbnZhciBkZWZhdWx0QmFzZVVybCA9IFwiaHR0cHM6Ly9hcGkucmVzZW5kLmNvbVwiO1xudmFyIGRlZmF1bHRVc2VyQWdlbnQgPSBgcmVzZW5kLW5vZGU6JHt2ZXJzaW9ufWA7XG52YXIgYmFzZVVybCA9IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3MuZW52ID8gcHJvY2Vzcy5lbnYuUkVTRU5EX0JBU0VfVVJMIHx8IGRlZmF1bHRCYXNlVXJsIDogZGVmYXVsdEJhc2VVcmw7XG52YXIgdXNlckFnZW50ID0gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy5lbnYgPyBwcm9jZXNzLmVudi5SRVNFTkRfVVNFUl9BR0VOVCB8fCBkZWZhdWx0VXNlckFnZW50IDogZGVmYXVsdFVzZXJBZ2VudDtcbnZhciBSZXNlbmQgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGtleSkge1xuICAgIHRoaXMua2V5ID0ga2V5O1xuICAgIHRoaXMuYXBpS2V5cyA9IG5ldyBBcGlLZXlzKHRoaXMpO1xuICAgIHRoaXMuYXVkaWVuY2VzID0gbmV3IEF1ZGllbmNlcyh0aGlzKTtcbiAgICB0aGlzLmJhdGNoID0gbmV3IEJhdGNoKHRoaXMpO1xuICAgIHRoaXMuYnJvYWRjYXN0cyA9IG5ldyBCcm9hZGNhc3RzKHRoaXMpO1xuICAgIHRoaXMuY29udGFjdHMgPSBuZXcgQ29udGFjdHModGhpcyk7XG4gICAgdGhpcy5kb21haW5zID0gbmV3IERvbWFpbnModGhpcyk7XG4gICAgdGhpcy5lbWFpbHMgPSBuZXcgRW1haWxzKHRoaXMpO1xuICAgIHRoaXMud2ViaG9va3MgPSBuZXcgV2ViaG9va3ModGhpcyk7XG4gICAgaWYgKCFrZXkpIHtcbiAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudikge1xuICAgICAgICB0aGlzLmtleSA9IHByb2Nlc3MuZW52LlJFU0VORF9BUElfS0VZO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmtleSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ01pc3NpbmcgQVBJIGtleS4gUGFzcyBpdCB0byB0aGUgY29uc3RydWN0b3IgYG5ldyBSZXNlbmQoXCJyZV8xMjNcIilgJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyh7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5rZXl9YCxcbiAgICAgIFwiVXNlci1BZ2VudFwiOiB1c2VyQWdlbnQsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH0pO1xuICB9XG4gIGFzeW5jIGZldGNoUmVxdWVzdChwYXRoLCBvcHRpb25zID0ge30pIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfSR7cGF0aH1gLCBvcHRpb25zKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByYXdFcnJvciA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvcjogSlNPTi5wYXJzZShyYXdFcnJvcikgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFN5bnRheEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiYXBwbGljYXRpb25fZXJyb3JcIixcbiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3IuIFdlIGFyZSB1bmFibGUgdG8gcHJvY2VzcyB5b3VyIHJlcXVlc3QgcmlnaHQgbm93LCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGVycm9yID0ge1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgIHN0YXR1c0NvZGU6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgIG5hbWU6IFwiYXBwbGljYXRpb25fZXJyb3JcIlxuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvcjogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgZXJyb3IpLCB7IG1lc3NhZ2U6IGVyci5tZXNzYWdlIH0pIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4geyBkYXRhLCBlcnJvcjogbnVsbCB9O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbmFtZTogXCJhcHBsaWNhdGlvbl9lcnJvclwiLFxuICAgICAgICAgIHN0YXR1c0NvZGU6IG51bGwsXG4gICAgICAgICAgbWVzc2FnZTogXCJVbmFibGUgdG8gZmV0Y2ggZGF0YS4gVGhlIHJlcXVlc3QgY291bGQgbm90IGJlIHJlc29sdmVkLlwiXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9XG4gIGFzeW5jIHBvc3QocGF0aCwgZW50aXR5LCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKTtcbiAgICBpZiAob3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpLmVudHJpZXMoKSkge1xuICAgICAgICBoZWFkZXJzLnNldChrZXksIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuaWRlbXBvdGVuY3lLZXkpIHtcbiAgICAgIGhlYWRlcnMuc2V0KFwiSWRlbXBvdGVuY3ktS2V5XCIsIG9wdGlvbnMuaWRlbXBvdGVuY3lLZXkpO1xuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGVudGl0eSlcbiAgICB9LCBvcHRpb25zKSwge1xuICAgICAgaGVhZGVyc1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLmZldGNoUmVxdWVzdChwYXRoLCByZXF1ZXN0T3B0aW9ucyk7XG4gIH1cbiAgYXN5bmMgZ2V0KHBhdGgsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpO1xuICAgIGlmIChvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycykuZW50cmllcygpKSB7XG4gICAgICAgIGhlYWRlcnMuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgfSwgb3B0aW9ucyksIHtcbiAgICAgIGhlYWRlcnNcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIHB1dChwYXRoLCBlbnRpdHksIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpO1xuICAgIGlmIChvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycykuZW50cmllcygpKSB7XG4gICAgICAgIGhlYWRlcnMuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZW50aXR5KVxuICAgIH0sIG9wdGlvbnMpLCB7XG4gICAgICBoZWFkZXJzXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0KHBhdGgsIHJlcXVlc3RPcHRpb25zKTtcbiAgfVxuICBhc3luYyBwYXRjaChwYXRoLCBlbnRpdHksIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpO1xuICAgIGlmIChvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycykuZW50cmllcygpKSB7XG4gICAgICAgIGhlYWRlcnMuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShlbnRpdHkpXG4gICAgfSwgb3B0aW9ucyksIHtcbiAgICAgIGhlYWRlcnNcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIGRlbGV0ZShwYXRoLCBxdWVyeSkge1xuICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocXVlcnkpLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMpO1xuICB9XG59O1xuZXhwb3J0IHtcbiAgUmVzZW5kXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/resend/dist/index.mjs\n");

/***/ })

};
;